/*
* Copyright 2014 Seven Spikes Ltd. All rights reserved. (http://www.nop-templates.com)
* http://www.nop-templates.com/t/licensinginfo
*/

function FiltersManager() { this.categoryId = $(".nopAjaxFilters7Spikes").attr("data-categoryId"); this.manufacturerId = $(".nopAjaxFilters7Spikes").attr("data-manufacturerId"); this.vendorId = $(".nopAjaxFilters7Spikes").attr("data-vendorId"); this.getFilteredProductsUrl = $(".nopAjaxFilters7Spikes").attr("data-getFilteredProductsUrl"); this.filtersUIMode = $(".nopAjaxFilters7Spikes").attr("data-filtersUIMode"); this.filtersUIModeEnum = { userCheckboxes: "usecheckboxes", useDropDowns: "usedropdowns" }; this.selectedFilterGroupElement = undefined; this.selectedFilterOptionElement = undefined; this.requestProductsForSelectedFilters = RequestProductsForSelectedFilters; this.getSpecificationFiltersModel = GetSpecificationFiltersModel; this.getAttributeFiltersModel = GetAttributeFiltersModel; this.getManufacturerFiltersModel = GetManufacturerFiltersModel; this.getVendorFiltersModel = GetVendorFiltersModel; this.getOnSaleFiltersModel = GetOnSaleFiltersModel; this.getPriceRangeFilterModel = GetPriceRangeFilterModel; this.refreshProducts = RefreshProducts; this.refreshProductsPager = RefreshProductsPager; this.replaceSortAndViewOptionsDropDowns = ReplaceSortAndViewOptionsDropDowns; this.setPagerLinks = SetPagerLinks; this.getProductsPanelSelector = GetProductsPanelSelector; this.getPagerPanelSelector = GetPagerPanelSelector; this.getSortOptionsDropDownSelector = GetSortOptionsDropDownSelector; this.getViewOptionsDropDownSelector = GetViewOptionsDropDownSelector; this.getProductsPageSizeDropDownSelector = GetProductsPageSizeDropDownSelector; this.sortProducts = SortProducts; this.changeViewMode = ChangeViewMode; this.changePageSize = ChangePageSize; this.clearFilterOptions = ClearFilterOptions; this.clearFilterOptionsForFiltersGroupElement = ClearFilterOptionsForFiltersGroupElement; this.selectAllFilterDropDownOption = SelectAllFilterDropDownOption; this.clearAllFilterOptions = ClearAllFilterOptions; this.refreshClearButtons = RefreshClearButtons; this.expandFilterPanelsWithSelectedOptions = ExpandFilterPanelsWithSelectedOptions; this.changeViewModeOrderByAndPageSize = ChangeViewModeOrderByAndPageSize; this.setPriceRangeValues = SetPriceRangeValues; this.refreshFilters = RefreshFilters; this.addProductPanelAjaxBusyToPage = function () { parentForAjaxBusyPanel = ".ajaxBusyPanelParent"; var e = $(".nopAjaxFilters7Spikes").attr("data-productsGridPanelSelector") + "," + $(".nopAjaxFilters7Spikes").attr("data-ProductsListPanelSelector"); var t = $(".master-wrapper-page " + e).not(".featured-product-grid"); if (t.length > 1) { $(t[t.length - 1]).addClass("ajaxBusyPanelParent " + nop7SpikesAjaxFiltersGridClass) } else { $(t).addClass("ajaxBusyPanelParent " + nop7SpikesAjaxFiltersGridClass) } $(parentForAjaxBusyPanel).css("position", "relative"); $(parentForAjaxBusyPanel).append($('<div class="productPanelAjaxBusy"></div><div class="clear"></div>')); $(".productPanelAjaxBusy").hide() }; this.setSpecificationFilterSelection = function (e, t) { this.selectedFilterGroupElement = e; this.selectedFilterOptionElement = t }; this.determineIfRequestIsValidForControlState = function (e) { var t = false; if (e == undefined || e.attr("class") == "filterItemUnselected" || e.attr("class") == "filterItemSelected" && this.filtersUIMode == this.filtersUIModeEnum.userCheckboxes) { t = true } return t }; this.changeControlsState = function (e) { if (e == undefined) { return } var t = e.attr("class"); if (t == "filterItemSelected") { e.attr("class", "filterItemUnselected") } else if (t == "filterItemUnselected") { e.attr("class", "filterItemSelected") } if (this.selectedFilterGroupElement != undefined && this.filtersUIMode == this.filtersUIModeEnum.useDropDowns) { var n = this.selectedFilterOptionElement; this.selectedFilterGroupElement.find("a[data-option-id],[data-option-ids]").each(function (e, t) { if ($(t).attr("class") == "filterItemSelected" && t != n.get(0)) { $(t).attr("class", "filterItemUnselected") } }) } }; this.showNoProductsModalDialog = function () { var e = $("#nopAjaxFiltersNoProductsDialog").data("kendoWindow"); var t = $("#nopAjaxFiltersNoProductsDialog").attr("title"); if (!t) { t = "NO RESULTS FOUND" } if (!e) { e = $("#nopAjaxFiltersNoProductsDialog").kendoWindow({ draggable: false, resizable: false, width: "300px", height: "100px", title: t, modal: true, actions: ["Close"], animation: false, visible: false }).data("kendoWindow"); e.wrapper.addClass("ajaxFilters") } e.center(); e.open() }; this.showProductPanelAjaxBusy = function () { $(".productPanelAjaxBusy").show() }; this.hideProductPanelAjaxBusy = function () { $(".productPanelAjaxBusy").hide() } } function RequestProductsForSelectedFilters(e, t, n, r, i, s) { if (FiltersManager.waitForAjaxRequest) { return } if (r == "#/noFilterApplied") { return } if (!this.determineIfRequestIsValidForControlState(t)) { return } if (r == undefined) { r = "" } else { s = true } this.setSpecificationFilterSelection(e, t); this.changeControlsState(t); var o = this.getSpecificationFiltersModel(); var u = this.getAttributeFiltersModel(); var a = this.getManufacturerFiltersModel(); var f = this.getVendorFiltersModel(); var l = this.getOnSaleFiltersModel(); var c = this.getPriceRangeFilterModel(); if (n == undefined) { n = null } var h = $("#sortOptionsDropDown").attr("data-DropDownOptionsSelectedValue"); if (h == undefined) { h = null } var p = $("#viewOptionsDropDown").attr("data-DropDownOptionsSelectedValue"); if (p == undefined) { p = null } var d = $("#productsPageSizeDropDown").attr("data-DropDownOptionsSelectedValue"); if (d == undefined) { d = null } var v = $.getUrlVar("pagenumber"); if (v != undefined && n == null && (i == undefined || i == false)) { n = v } if (s == undefined) { s = false } var m = { categoryId: this.categoryId, manufacturerId: this.manufacturerId, vendorId: this.vendorId, priceRangeFilterModel7Spikes: c, specificationFiltersModel7Spikes: o, attributeFiltersModel7Spikes: u, manufacturerFiltersModel7Spikes: a, vendorFiltersModel7Spikes: f, pageNumber: n, orderby: h, viewmode: p, pagesize: d, queryString: r, shouldNotStartFromFirstPage: s, onSaleFilterModel: l }; this.showProductPanelAjaxBusy(); var g = this; var y = this.getFilteredProductsUrl; FiltersManager.waitForAjaxRequest = true; $.ajax({ cache: false, type: "POST", data: $.toJSON(m), contentType: "application/json; charset=utf-8", url: y, success: function (e) { if (r != "") { g.changeViewModeOrderByAndPageSize(e); g.setPriceRangeValues(e) } var t = g.refreshProducts(e); if (!t) { g.changeControlsState(g.selectedFilterOptionElement); FiltersManager.waitForAjaxRequest = false; return } g.refreshFilters(e); g.refreshProductsPager(e); g.refreshClearButtons(); if (r != "NO HASH QUERY") { g.expandFilterPanelsWithSelectedOptions(); var n = $(e).filter("#urlHashQuery").val().toString(); if (n != "") { $.address.value(n) } else { $.address.value("noFilterApplied"); $(".nopAjaxFilters7Spikes .selected-options").remove() } } g.hideProductPanelAjaxBusy(); FiltersManager.waitForAjaxRequest = false; var i = $(".nopAjaxFilters7Spikes").attr("data-scrollToElement"); if (i != undefined && i.toLowerCase() == "true") { var s = $(".nopAjaxFilters7Spikes").attr("data-scrollToElementSelector"); var o = s.split(","); var u = ".product-selectors"; if (o != undefined && o.length > 0) { for (var a = 0; a < o.length; a++) { if ($(o[a].trim()).length > 0) { u = o[a].trim(); break } } if ($(u).length > 0) { $("html, body").animate({ scrollTop: $(u).offset().top }, "slow") } } } if ($(".productPanelAjaxBusy").length < 1) { g.addProductPanelAjaxBusyToPage() } var f = $(e).filter("#totalCount").val().toString(); $.event.trigger({ type: "nopAjaxFiltersFiltrationCompleteEvent", totalCount: f }); if ($(".nopAjaxFilters7Spikes").attr("data-showSelectedFiltersPanel").toLowerCase() == "true") { showSelectedOptions() } }, error: function (e, t, n) { g.hideProductPanelAjaxBusy(); alert("Loading the page failed."); FiltersManager.waitForAjaxRequest = false } }) } function RefreshFilters(e) { var t = this; var n = $(e).filter("#specificationFilterModel7SpikesJson").val().toString(); var r = $.parseJSON(n); if (t.refreshSpecificationFilters != undefined) { t.refreshSpecificationFilters(r, t.filtersUIMode) } var i = $(e).filter("#attributeFilterModel7SpikesJson").val().toString(); var s = $.parseJSON(i); if (t.refreshAttributeFilters != undefined) { t.refreshAttributeFilters(s, t.filtersUIMode) } var o = $(e).filter("#manufacturerFilterModel7SpikesJson").val().toString(); var u = $.parseJSON(o); if (t.refreshManufacturerFilters != undefined) { t.refreshManufacturerFilters(u, t.filtersUIMode) } var a = $(e).filter("#vendorFilterModel7SpikesJson").val().toString(); var f = $.parseJSON(a); if (t.refreshVendorFilters != undefined) { t.refreshVendorFilters(f, t.filtersUIMode) } var l = $(e).filter("#onSaleFilterModel7SpikesJson").val().toString(); var c = $.parseJSON(l); if (t.refreshOnSaleFilters != undefined) { t.refreshOnSaleFilters(c, t.filtersUIMode) } } function SetPriceRangeValues(e) { var t = this; var n = $(e).filter("#priceRangeFromJson").val().toString(); var r = $.parseJSON(n); var i = $(e).filter("#priceRangeToJson").val().toString(); var s = $.parseJSON(i); if (t.SetSliderValues != undefined) t.SetSliderValues(r, s) } function RequestProductsForPagerLink(e) { var t = $(e.currentTarget); var n = t.attr("data-pageNumber"); if (e.data != null && e.data.filtersManager != undefined) { var r = e.data.filtersManager; r.requestProductsForSelectedFilters(undefined, undefined, n, undefined, undefined, true) } } function GetSpecificationFiltersModel() { var e = null; if (this.buildSpecificationFiltersModel != undefined) { e = this.buildSpecificationFiltersModel(this.categoryId, this.manufacturerId, this.vendorId, this.selectedFilterGroupElement) } return e } function GetAttributeFiltersModel() { var e = null; if (this.buildAttributeFiltersModel != undefined) { e = this.buildAttributeFiltersModel(this.categoryId, this.manufacturerId, this.vendorId, this.selectedFilterGroupElement) } return e } function GetManufacturerFiltersModel() { var e = null; if (this.buildManufacturerFiltersModel != undefined) { e = this.buildManufacturerFiltersModel(this.categoryId, this.selectedFilterGroupElement) } return e } function GetVendorFiltersModel() { var e = null; if (this.buildVendorFiltersModel != undefined) { e = this.buildVendorFiltersModel(this.categoryId, this.selectedFilterGroupElement) } return e } function GetOnSaleFiltersModel() { var e = null; if (this.buildOnSaleFiltersModel != undefined) { e = this.buildOnSaleFiltersModel(this.categoryId, this.manufacturerId, this.vendorId, this.selectedFilterGroupElement) } return e } function GetPriceRangeFilterModel() { var e = null; if (this.buildPriceRangeFilterModel != undefined) { e = this.buildPriceRangeFilterModel(this.categoryId, this.manufacturerId, this.vendorId, this.selectedFilterGroupElement) } return e } function RefreshProducts(e) { var t = $("#viewOptionsDropDown").attr("data-DropDownOptionsSelectedValue"); if (t == undefined) { t = $(".nopAjaxFilters7Spikes").attr("data-defaultViewMode") } var n = this.getProductsPanelSelector(t); var r = $("." + nop7SpikesAjaxFiltersGridClass); var i; if ($(e).filter(n).html() != null) { if (r.length > 1) { $(r[r.length - 1]).replaceWith($(e).filter(n)) } else { r.replaceWith($(e).filter(n)) } i = true } else { this.hideProductPanelAjaxBusy(); if ($("#nopAjaxFiltersNoProductsDialog").length > 0) { this.showNoProductsModalDialog() } else { r.prepend($(e).filter("#nopAjaxFiltersNoProductsDialog")); this.showNoProductsModalDialog() } i = false } return i } function GetProductsPanelSelector(e) { var t; if (e == "list") { var n = $(".nopAjaxFilters7Spikes").attr("data-ProductsListPanelSelector"); if (n != undefined) { t = n } else { t = ".product-list" } } else { var r = $(".nopAjaxFilters7Spikes").attr("data-productsGridPanelSelector"); if (r != undefined) { t = r } else { t = ".product-grid" } } return t } function GetPagerPanelSelector() { var e = ".pager"; if (e != undefined) { e = $(".nopAjaxFilters7Spikes").attr("data-pagerPanelSelector") } return e } function RefreshProductsPager(e) { var t = this.getPagerPanelSelector(); var n = $(t); n.html($(e).filter(t).html()); this.setPagerLinks(n) } function SetPagerLinks(e) { var t = this; e.find("a").each(function () { var e = $(this).attr("href"); var n = ""; if (e != undefined) { var r = /pagenumber=(\d+)/; e = e.toLowerCase(); var i = r.exec(e); if (i != null && i.length > 1) { n = i[1] } } $(this).removeAttr("href"); $(this).attr("data-pageNumber", n); $(this).click({ filtersManager: t }, RequestProductsForPagerLink) }) } function GetSortOptionsDropDownSelector() { var e = $(".nopAjaxFilters7Spikes").attr("data-sortOptionsDropDownSelector"); if (e == "") { e = "#products-orderby" } return e } function GetViewOptionsDropDownSelector() { var e = $(".nopAjaxFilters7Spikes").attr("data-viewOptionsDropDownSelector"); if (e == "") { e = "#products-viewmode" } return e } function GetProductsPageSizeDropDownSelector() { var e = $(".nopAjaxFilters7Spikes").attr("data-productsPageSizeDropDownSelector"); if (e == "") { e = "#products-pagesize" } return e } function ChangeViewModeOrderByAndPageSize(e) { var t = $(e).filter("#currentPageSizeJson").val().toString(); var n = $.parseJSON(t); var r = $(e).filter("#currentOrderByJson").val().toString(); var i = $.parseJSON(r); var s = $(e).filter("#currentViewModeJson").val().toString(); var o = $.parseJSON(s); var u = $("#sortOptionsDropDown"); var a = $("#viewOptionsDropDown"); var f = $("#productsPageSizeDropDown"); if (u.length == 0 && a.length == 0 && f.length == 0) { return } var l = new Array; var c = new Array; var h = new Array; var p = "#availableSortOptionsJson"; var d = PopulateOptions(u, l, p, i); var v = "#availableViewModesJson"; var m = PopulateOptions(a, c, v, o); var g = "#availablePageSizesJson"; var y = PopulateOptions(f, h, g, n); if (n != undefined) { SetSelectedElementByDropdownSelector(f, y, h) } if (i != undefined) { SetSelectedElementByDropdownSelector(u, d, l) } if (o != undefined) { SetSelectedElementByDropdownSelector(a, m, c) } } function SetSelectedElementByDropdownSelector(e, t, n) { var r = e.get(0); var i = $(e.find("li")[t]); if (i != undefined && r != undefined) { r.selectedLiElement = i; r.par.text($(i).text()); e.attr("data-dropDownOptionsSelectedValue", n[t].dropDownOptionValue) } else { return } } function ReplaceSortAndViewOptionsDropDowns() { var e = this.getSortOptionsDropDownSelector(); var t = $(e); var n = this.getViewOptionsDropDownSelector(); var r = $(n); var i = this.getProductsPageSizeDropDownSelector(); var s = $(i); if (t.length == 0 && r.length == 0 && s.length == 0) { return } var o = new Array; var u = new Array; var a = new Array; var f = "#availableSortOptionsJson"; var l = PopulateOptions(t, o, f); var c = "#availableViewModesJson"; var h = PopulateOptions(r, u, c); var p = "#availablePageSizesJson"; var d = PopulateOptions(s, a, p); var v = nop_store_directory_root + "Plugins/SevenSpikes.Nop.Plugins.AjaxFilters/JQueryTemplates/JDropDown.htm"; $.ajax({ url: v, async: false, success: function (e) { $.template("jDropDownTemplate", e); if (t.length > 0) { var n = { jDropDownId: "sortOptionsDropDown", jDropDownCss: "sortOptionsDropDown", dropDownOptions: o }; $.tmpl("jDropDownTemplate", n, { selectedOptionIndex: l, dropDownOptionClickCallback: "new FiltersManager().sortProducts" }).insertAfter(t); $("#sortOptionsDropDown").attr("data-dropDownOptionsSelectedValue", o[l].dropDownOptionValue); t.remove() } if (r.length > 0) { var i = { jDropDownId: "viewOptionsDropDown", jDropDownCss: "viewOptionsDropDown", dropDownOptions: u }; $.tmpl("jDropDownTemplate", i, { selectedOptionIndex: h, dropDownOptionClickCallback: "new FiltersManager().changeViewMode" }).insertAfter(r); $("#viewOptionsDropDown").attr("data-dropDownOptionsSelectedValue", u[selectedOptionIndex].dropDownOptionValue); r.remove() } if (s.length > 0) { var f = { jDropDownId: "productsPageSizeDropDown", jDropDownCss: "productsPageSizeDropDown", dropDownOptions: a }; $.tmpl("jDropDownTemplate", f, { selectedOptionIndex: d, dropDownOptionClickCallback: "new FiltersManager().changePageSize" }).insertAfter(s); $("#productsPageSizeDropDown").attr("data-dropDownOptionsSelectedValue", a[d].dropDownOptionValue); s.remove() } }, error: function (e, t, n) { alert("Retrieving " + v + " failed.") } }) } function PopulateOptions(e, t, n, r) { var i = 0; if (e.length > 0) { var s = $(n).val().toString(); var o = $.parseJSON(s); $.each(o, function (e, n) { t.push({ dropDownOptionName: n.Text, dropDownOptionValue: n.Value }); if (r) { if (n.Value == r) { i = e } } else { if (i == 0 && n.Selected) { i = e } } }) } return i } function SortProducts(e) { var t = $(e.currentTarget); var n = t.attr("data-DropDownOptionValue"); $("#sortOptionsDropDown").attr("data-DropDownOptionsSelectedValue", n); var r = new FiltersManager; r.requestProductsForSelectedFilters() } function ChangeViewMode(e) { var t = $(e.currentTarget); var n = t.attr("data-DropDownOptionValue"); $("#viewOptionsDropDown").attr("data-DropDownOptionsSelectedValue", n); var r = new FiltersManager; r.requestProductsForSelectedFilters(undefined, undefined, undefined, undefined, undefined, true) } function ChangePageSize(e) { var t = $(e.currentTarget); var n = t.attr("data-DropDownOptionValue"); $("#productsPageSizeDropDown").attr("data-DropDownOptionsSelectedValue", n); var r = new FiltersManager; r.requestProductsForSelectedFilters() } function SelectAllFilterDropDownOption(e) { var t = $(e.currentTarget); var n = t.parents(".filtersGroupPanel"); var r = e.data.filtersManager; r.clearFilterOptionsForFiltersGroupElement(n) } function ClearFilterOptions(e) { var t = $(e.currentTarget); var n = t.parent().siblings(".filtersGroupPanel"); var r = e.data.filtersManager; r.clearFilterOptionsForFiltersGroupElement(n) } function ClearFilterOptionsForFiltersGroupElement(e) { $(e).find("a[data-option-id], a[data-optionsGroupId]").each(function (e, t) { if ($(t).attr("class") == "filterItemSelected") { $(t).attr("class", "filterItemUnselected") } else if ($(t).attr("class") == "filterItemSelectedDisabled") { $(t).attr("class", "filterItemDisabled") } }); if (this.filtersUIMode == this.filtersUIModeEnum.useDropDowns) { $(e).find(".filtersDropDown").jDropDown({ method: "reset" }) } var t = e; this.requestProductsForSelectedFilters(t, undefined) } function ClearAllFilterOptions(e) { $(".nopAjaxFilters7Spikes .filtersGroupPanel").each(function (e, t) { $(t).find("a[data-option-id], a[data-optionsGroupId]").each(function (e, t) { $(t).attr("class", "filterItemUnselected") }) }); var t = e.data.filtersManager; if (t.filtersUIMode == t.filtersUIModeEnum.useDropDowns) { $(".nopAjaxFilters7Spikes .filtersGroupPanel .filtersDropDown").jDropDown({ method: "reset" }) } if (t.clearPriceRangeFilterControl != undefined) { t.clearPriceRangeFilterControl() } t.requestProductsForSelectedFilters() } function RefreshClearButtons() { var e = false; $(".nopAjaxFilters7Spikes .filtersGroupPanel").each(function (t, n) { var r = false; $(n).find("a[data-option-id], a[data-optionsGroupId]").each(function (e, t) { if ($(t).attr("class") == "filterItemSelected") { r = true; return false } }); var i = $(n).parent().find("a.clearFilterOptions"); if (r) { i.show(); e = true } else { i.hide() } }); var t = $(".nopAjaxFilters7Spikes .filtersTitlePanel a.clearFilterOptionsAll"); if (e) { t.show() } else { var n = false; if (this.determineIfPriceRangeHasBeenSelected != undefined) { n = this.determineIfPriceRangeHasBeenSelected() } if (n) { t.show() } else { t.hide() } } } function ExpandFilterPanelsWithSelectedOptions() { $(".clearPriceRangeFilter, .clearFilterOptions").filter(":visible").siblings("a.toggleControl.closed").click() } function expandableFiltersBlocks(e) { if (e.hasClass("closed") == true) { e.removeClass("closed") } else { e.addClass("closed") } e.parent().siblings(".filtersGroupPanel").slideToggle("slow", function () { e.css("overflow", "") }) } function showSelectedOptions() { var e = $(".nopAjaxFilters7Spikes"); e.children(".filtersPanel").children(".selected-options").remove(); var t = $('<div class="block filter-block selected-options"><div class="title"><a class="toggleControl">Selected options</a></div><div class="filtersGroupPanel"><ul class="selected-options-list"></ul></div></div>'); var n = t.find(".selected-options-list"); t.find("a.toggleControl").on("click", function () { expandableFiltersBlocks($(this)) }); if (e.find(".priceRangeFilterPanel7Spikes").length > 0) { var r = e.find("#slider"); var i = r.attr("data-sliderminvalue"); var s = r.attr("data-slidermaxvalue"); var o = $(".priceRangeCurrentPricesPanel .currentMinPrice").text(); var u = $(".priceRangeCurrentPricesPanel .currentMaxPrice").text(); if (r.length > 0 && (i != o || s != u)) { var a = $('<span class="option">' + o + " - " + u + "</span>"); a.anchorCustomClick(e.find(".block .title a.clearPriceRangeFilter")); var f = $("<li><label>Price range:</label></li>"); f.append(a); n.append(f) } } e.find(".filter-block").has(".filterItemSelected").each(function (t, r) { var i = $("<li><label>" + $(r).children(".title").children("a.toggleControl").first().text() + ":</label></li>"); $(r).find(".filterItemSelected").each(function () { var t = $('<span class="option">' + $(this).text() + "</span>"); if (e.attr("data-filtersuimode") == "usedropdowns") { t.anchorCustomClick($(this).parents(".filtersGroupPanel").siblings(".title").children(".clearFilterOptions")) } else { t.anchorCustomClick($(this)) } i.append(t) }); n.append(i) }); if (n.children().length > 0) { e.children(".filtersPanel").prepend(t) } } var nop7SpikesAjaxFiltersGridClass = "nop7SpikesAjaxFiltersGrid"; $(document).ready(function () { if (typeof String.prototype.trim !== "function") { String.prototype.trim = function () { return this.replace(/^\s+|\s+$/g, "") } } var e = new FiltersManager; e.addProductPanelAjaxBusyToPage(); $(".nopAjaxFilters7Spikes .block .title a.toggleControl").off("click").on("click", function () { expandableFiltersBlocks($(this)) }); $(".nopAjaxFilters7Spikes .block .title a.clearFilterOptions").each(function () { $(this).click({ filtersManager: e }, e.clearFilterOptions); $(this).hide() }); $(".nopAjaxFilters7Spikes .filtersDropDown a.allFilterDropDownOptions").each(function () { $(this).click({ filtersManager: e }, e.selectAllFilterDropDownOption) }); var t = $(".nopAjaxFilters7Spikes .filtersTitlePanel a.clearFilterOptionsAll"); t.click({ filtersManager: e }, e.clearAllFilterOptions); t.hide(); e.replaceSortAndViewOptionsDropDowns(); e.refreshProductsPager(); if (e.filtersUIMode == e.filtersUIModeEnum.useDropDowns) { var n = $(".filtersDropDownPanel.filtersGroupPanel"); var r = n.length + 100; n.each(function () { $(this).css("z-index", r--) }) } }); FiltersManager.prototype.getFilterItemStateBasedOnItemClass = function (e, t) { var n = t; switch (e) { case "filterItemUnselected": n = "Unchecked"; break; case "filterItemSelected": n = "Checked"; break; case "filterItemSelectedDisabled": n = "CheckedDisabled"; break; case "filterItemDisabled": n = "Disabled"; break } return n }; FiltersManager.prototype.getFilterItemClassBasedOnState = function (e, t) { var n = t; switch (e) { case 0: n = "filterItemUnselected"; break; case 1: n = "filterItemSelected"; break; case 2: n = "filterItemSelectedDisabled"; break; case 3: n = "filterItemDisabled"; break } return n }; FiltersManager.waitForAjaxRequest = false; (function (e) { e.fn.extend({ anchorCustomClick: function (t) { return e(this).first().on("click", function (n) { n.preventDefault(); e(t).trigger("click") }) } }) })(jQuery)
